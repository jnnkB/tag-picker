/*!
 * ==============================================================
 *  TAG PICKER 3.0.8
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(t,n,e){function i(t,n){var e=n[A](t);return 0>e?null:e}function a(t,n){return t[M].remove(n)}function u(t,n){return t[M].add(n)}function s(t,n){return n[A](t)>=0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function c(t){return void 0!==t||null===t}function f(t){return"string"==typeof t}function l(t){g(t)&&t[S][q](t)}function g(t){return t&&t[S]}function d(t,e,i){var a,u,s=f(t)?n[T](t):t;if((e||""===e)&&(s[O]=e),i)for(a in i)u=i[a],null===u||!1===u?s[P](a):s[G](a,u);return s}var p="Arrow",v=p+"Left",m=p+"Right",h="Backspace",b="Delete",x="Enter",k="Tab",y="__instance__",w="appendChild",j="children",M="classList",T="createElement",C="ctrlKey",E="disabled",L="firstChild",R="forEach",_="getAttribute",A="indexOf",O="innerHTML",B="insertBefore",D="key",I=D+"Code",K="nextSibling",N="nodeName",S="parentNode",z="previousSibling",H="readOnly",P="removeAttribute",q="removeChild",F="replace",G="setAttribute",J="shiftKey",Q="textContent",U="toLowerCase",V=setTimeout;!function(t){t.version="3.0.8",t[y]={},t.each=function(n,e){var i,a;return V(function(){a=t[y];for(i in a)n.call(a[i],i)},0===e?0:e||1),t},t.I={"Maximum tags allowed is %d":"Maximum tags allowed is %d.","Minimum tags allowed is %d":"Minimum tags allowed is %d.","Remove tag %s":"Remove tag “%s”","Tag %s already exists":"Tag “%s” already exists."},t.i=function(n,e){return n=t.I[n]||n,e&&e[R](function(t){n=n[F]("%"+(o(t)?"d":"s"),t)}),n},t._=t.prototype}(t[e]=function(n,g){function p(t,n){if(!c(t))return Cn={},wn;if(c(Cn[t]))if(c(n))for(var e=0,i=Cn[t].length;i>e;++e)n===Cn[t][e]&&Cn[t].splice(e,1);else delete Cn[t];return wn}function M(t,n){return c(Cn[t])||(Cn[t]=[]),c(n)&&Cn[t].push(n),wn}function T(t,n){if(!c(Cn[t]))return wn;for(var e=0,i=Cn[t].length;i>e;++e)Cn[t][e].apply(wn,n);return wn}function A(t){return wn.f(t)[F](RegExp("("+En.escape.join("|")[F](/\\/g,"\\\\")+")+"),"").trim()}function P(t){if(n[E]||n[H])return cn("");var e,i=A(On[Q]);i&&(dn(i)?t&&on("Tag %s already exists",[i]):(mn(i),vn(i),e=wn.tags.length,T("change",[i,e]),T("set.tag",[i,e])),cn(""))}function q(){P(1),a(Rn,"focus"),a(Rn,"focus.input"),T("blur",[yn,wn.tags.length])}function G(){T("click",[wn.tags])}function W(){u(Rn,"focus"),u(Rn,"focus.input"),T("focus",[wn.tags])}function X(t){var e,i=En.escape,u=t[I],r=t[D],o=t[C],c=x===r||13===u,f=t[J],l=k===r||9===u,g=An[z],d=wn.tags.length,p=En.max,m=A(On[Q]);c?r="\n":l&&(r="	"),l||(n[E]||n[H]?(c&&n[H]&&bn(),gn(t)):s(r,i)||s(u,i)?(p>d?P(1):(cn(""),on("Maximum tags allowed is %d",[p])),gn(t)):c?(bn(),gn(t)):V(function(){var n=On[Q],c=A(n);s(n.slice(-1),i)?(p>d?P(1):(cn(""),on("Maximum tags allowed is %d",[p])),gn(t)):""!==c||o||f||(""!==m||h!==r&&8!==u?(v===r||37===u)&&g&&g.focus():(e=wn.tags[d-1],a(Rn,"focus.tag"),hn(e),pn(e),g&&(T("change",[e,d-1]),T("let.tag",[e,d-1])))),Bn[O]=c?"":Mn},0))}function Y(t){if(Rn[S])for(var e;e=An[z];)hn(e.title);for(wn.tags=[],n.value="",t=t?t.split(En.join):[],kn=En.max,yn,xn=0;kn>xn&&t[xn];++xn)if(""!==(yn=A(t[xn]))){if(dn(yn))continue;mn(yn),vn(yn),T("change",[yn,xn]),T("set.tag",[yn,xn])}}function Z(t){if(!n[E]){var e=En.min;return P(),e>0&&wn.tags.length<e?(cn("",1),on("Minimum tags allowed is %d",[e]),void gn(t)):1}}function $(){V(function(){n[E]||n[H]||Y(On[Q]),cn("")},0)}function tn(t){t&&Rn===t.target&&(On.focus(),G())}function nn(){On.focus()}function en(){var t=this,n=t.title;a(Rn,"focus"),a(Rn,"focus.tag"),T("blur.tag",[n,i(n,wn.tags)])}function an(){var t=this.title;T("click.tag",[t,i(t,wn.tags)])}function un(){var t=this,n=t.title;u(Rn,"focus"),u(Rn,"focus.tag"),T("focus.tag",[n,i(n,wn.tags)])}function sn(t){if(!n[E]&&!n[H]){var e=this[S].title;hn(e),pn(e),cn("",1)}gn(t)}function rn(t){var e=this,u=t[I],s=t[D],r=(t[C],n[H]),o=(t[J],e[z]),c=e[K];if(r||v!==s&&37!==u)if(r||m!==s&&39!==u){if(h===s||b===s||8===u||46===u){if(!r){var f=e.title,l=i(f,wn.tags);a(Rn,"focus.tag"),hn(f),pn(f),h===s||8===u?o?o.focus():cn("",1):c&&c!==An?c.focus():cn("",1),T("change",[f,l]),T("let.tag",[f,l])}gn(t)}}else c&&c!==An?c.focus():cn("",1),gn(t);else o&&(o.focus(),gn(t))}function on(t,n){var e,i=En.alert;!0===i&&(e=jn.i(t,n))?alert(e):r(i)?i.apply(wn,n):f(i)&&jn[i]&&jn[i].apply(wn,n)}function cn(t,n){On[Q]=t,Bn[Q]=t?"":Mn,n&&On.focus()}function fn(t,n,e){t.removeEventListener(n,e)}function ln(t,n,e){t.addEventListener(n,e,!1)}function gn(t){t&&t.preventDefault()}function dn(t,n){var e=i(t,wn.tags);return n&&T("get.tag",[t,e]),o(e)?t:null}function pn(t){var e=i(t,wn.tags);return o(e)&&e>=0?(wn.tags.splice(e,1),n.value=wn.tags.join(En.join),!0):!1}function vn(t,e){o(e)?(e=0>e?0:e,wn.tags.splice(e,0,t)):wn.tags.push(t),n.value=wn.tags.join(En.join)}function mn(t,e){var i=d("span",0,{"class":"tag",tabindex:n[E]?!1:"0",title:t});if(En.x){var a=d("a",0,{href:"",tabindex:"-1",title:jn.i("Remove tag %s",[t])});ln(a,"click",sn),i[w](a)}ln(i,"blur",en),ln(i,"click",an),ln(i,"focus",un),ln(i,"keydown",rn),_n[S]&&(o(e)&&wn.tags[e]?_n[B](i,_n[j][e]):_n[B](i,An))}function hn(t){var n,e=i(t,wn.tags);if(o(e)&&e>=0&&(n=_n.children[e])){if(fn(n,"blur",en),fn(n,"click",an),fn(n,"focus",un),fn(n,"keydown",rn),En.x){var a=n[L];fn(a,"click",sn),l(a)}l(n)}}function bn(){Z()&&Ln&&Ln.submit()}if(n){var xn,kn,yn,wn=this,jn=t[e],Mn=n.placeholder||"",Tn=n[_]("tabindex"),Cn={},En=Object.assign({alert:!0,"class":"tag-picker",escape:[",",188],join:", ",max:9999,min:0,x:!1},f(g)?{join:g}:g||{});if(n[e])return wn;if(!(wn instanceof jn))return new jn(n,En);jn[y][n.id||n.name||Object.keys(jn[y]).length]=wn,n[e]=1;var Ln,Rn=d("span",0,{"class":En["class"]}),_n=d("span",0,{"class":"tags"}),An=d("span",0,{"class":"editor tag"}),On=d("span",0,{contenteditable:n[E]?!1:"true",spellcheck:"false",style:"white-space:pre;"}),Bn=d("span");for(wn.f=function(t){return t[U]()[F](/[^ a-z0-9-]/g,"")},cn(""),u(n,En["class"]+"-source"),n[S][B](Rn,n[K]),Rn[w](_n),_n[w](An),An[w](On),An[w](Bn),d(n,0,{tabindex:"-1"}),Ln=n[S];Ln&&Ln[N]&&"form"!==Ln[N][U]();)Ln=Ln[S];ln(On,"blur",q),ln(On,"click",G),ln(On,"focus",W),ln(On,"keydown",X),ln(On,"paste",$),ln(n,"focus",nn),ln(Rn,"click",tn),Ln&&ln(Ln,"submit",Z),wn.tags=[],Y(n.value),wn.hooks=Cn,wn.input=On,wn.self=wn.view=Rn,wn.source=wn.output=n,wn.state=En,wn.blur=function(){return!n[E]&&(On.blur(),q()),wn},wn.click=function(){return Rn.click(),tn(),wn},wn.fire=T,wn.focus=function(){return n[E]||(On.focus(),W()),wn},wn.get=function(t){return n[E]?null:dn(t,1)},wn.let=function(t,e){if(!n[E]&&!n[H]){var i=En.min;if(P(),e&&i>0&&wn.tags.length<i)return on("Minimum tags allowed is %d",[i]),wn;hn(t),pn(t)}return wn},wn.on=M,wn.off=p,wn.pop=function(){return n[e]?(delete n[e],fn(On,"blur",q),fn(On,"click",G),fn(On,"focus",W),fn(On,"keydown",X),fn(On,"paste",$),fn(n,"focus",nn),fn(Rn,"click",tn),Ln&&fn(Ln,"submit",Z),wn.tags[R](hn),a(n,En["class"]+"-source"),d(n,0,{tabindex:Tn}),l(Rn),T("pop")):wn},wn.set=function(t,e,i){if(!n[E]&&!n[H])if(dn(t))i&&on("Tag %s already exists",[t]);else{var a=En.max;wn.tags.length<a?(mn(t,e),vn(t,e)):i&&on("Maximum tags allowed is %d",[a])}return wn},wn.value=function(t){return!n[E]&&!n[H]&&Y(t),wn}}})}(window,document,"TP");
