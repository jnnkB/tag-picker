/*!
 * ==============================================================
 *  TAG PICKER 3.0.9
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(t,n,e){function r(t,n){var e=n[H](t);return 0>e?null:e}function i(t,n){return t[C].remove(n)}function u(t,n){return t[C].add(n)}function o(t,n){return n[H](t)>=0}function c(t){return"number"==typeof t}function a(t){return void 0!==t||null===t}function f(t){return"string"==typeof t}function s(t){l(t)&&t[D][W](t)}function l(t){return t&&t[D]}function g(t,e,r){var i,u,o=f(t)?n[w](t):t;if((e||""===e)&&(o[M]=e),r)for(i in r)u=r[i],null===u||!1===u?o[I](i):o[$](i,u);return o}var v="Arrow",d=v+"Left",p=v+"Right",h="Backspace",b="Delete",m="Enter",k="Tab",x="appendChild",y="children",C="classList",w="createElement",j="ctrlKey",E="disabled",L="firstChild",O="forEach",T="getAttribute",H="indexOf",M="innerHTML",A="insertBefore",z="instances",X="key",N=X+"Code",B="nextSibling",D="parentNode",R="previousSibling",S="readOnly",I="removeAttribute",W="removeChild",Y="replace",$="setAttribute",P="shiftKey",_="textContent",K="toLowerCase",F=setTimeout;!function(t){t.version="3.0.9",t.state={"class":"tag-picker",escape:[",",188],join:", ",max:9999,min:0,x:!1},t[z]={},t._=t.prototype}(t[e]=function(n,l){function v(t,n){if(!a(t))return wn={},kn;if(a(wn[t]))if(a(n))for(var e=0,r=wn[t].length;r>e;++e)n===wn[t][e]&&wn[t].splice(e,1);else delete wn[t];return kn}function C(t,n){return a(wn[t])||(wn[t]=[]),a(n)&&wn[t].push(n),kn}function w(t,n){if(!a(wn[t]))return kn;for(var e=0,r=wn[t].length;r>e;++e)wn[t][e].apply(kn,n);return kn}function H(t){return kn.f(t)[Y](RegExp("("+jn.escape.join("|")[Y](/\\/g,"\\\\")+")+"),"").trim()}function I(){if(n[E]||n[S])return on("");var t,e=H(Hn[_]),i=kn.tags;e&&(sn(e)?w("has.tag",[e,r(e,i)]):(vn(e),gn(e),t=i.length,w("change",[e,t]),w("set.tag",[e,t])),on(""))}function W(){I(),i(Ln,"focus"),i(Ln,"focus.input"),w("blur",[mn,kn.tags.length])}function $(){w("click",[kn.tags])}function q(){u(Ln,"focus"),u(Ln,"focus.input"),w("focus",[kn.tags])}function G(t){var e,r=jn.escape,u=t[N],c=t[X],a=t[j],f=m===c||13===u,s=t[P],l=k===c||9===u,g=Tn[R],v=kn.tags.length,p=jn.max,b=H(Hn[_]);f?c="\n":l&&(c="	"),l||(n[E]||n[S]?(f&&n[S]&&pn(),fn(t)):o(c,r)||o(u,r)?(p>v?I():(on(""),w("max.tags",[p])),fn(t)):f?(pn(),fn(t)):F(function(){var n=Hn[_],f=H(n);o(n.slice(-1),r)?(p>v?I():(on(""),w("max.tags",[p])),fn(t)):""!==f||a||s||(""!==b||h!==c&&8!==u?(d===c||37===u)&&g&&g.focus():(e=kn.tags[v-1],i(Ln,"focus.tag"),dn(e),ln(e),g&&(w("change",[e,v-1]),w("let.tag",[e,v-1])))),Mn[M]=f?"":yn},0))}function J(t){if(Ln[D])for(var e;e=Tn[R];)dn(e.title);for(kn.tags=[],n.value="",t=t?t.split(jn.join):[],bn=jn.max,mn,hn=0;bn>hn&&t[hn];++hn)if(""!==(mn=H(t[hn]))){if(sn(mn))continue;vn(mn),gn(mn),w("change",[mn,hn]),w("set.tag",[mn,hn])}}function Q(t){if(!n[E]){var e=jn.min;return I(),e>0&&kn.tags.length<e?(on("",1),w("min.tags",[e]),void fn(t)):1}}function U(){F(function(){n[E]||n[S]||J(Hn[_]),on("")},0)}function V(t){t&&Ln===t.target&&(Hn.focus(),$())}function Z(){Hn.focus()}function tn(){var t=this,n=t.title,e=kn.tags;i(Ln,"focus"),i(Ln,"focus.tag"),w("blur.tag",[n,r(n,e)])}function nn(){var t=this.title,n=kn.tags;w("click.tag",[t,r(t,n)])}function en(){var t=this,n=t.title,e=kn.tags;u(Ln,"focus"),u(Ln,"focus.tag"),w("focus.tag",[n,r(n,e)])}function rn(t){if(!n[E]&&!n[S]){var e=this[D].title;dn(e),ln(e),on("",1)}fn(t)}function un(t){var e=this,u=t[N],o=t[X],c=(t[j],n[S]),a=(t[P],e[R]),f=e[B];if(c||d!==o&&37!==u)if(c||p!==o&&39!==u){if(h===o||b===o||8===u||46===u){if(!c){var s=e.title,l=r(s,kn.tags);i(Ln,"focus.tag"),dn(s),ln(s),h===o||8===u?a?a.focus():on("",1):f&&f!==Tn?f.focus():on("",1),w("change",[s,l]),w("let.tag",[s,l])}fn(t)}}else f&&f!==Tn?f.focus():on("",1),fn(t);else a&&(a.focus(),fn(t))}function on(t,n){Hn[_]=t,Mn[_]=t?"":yn,n&&Hn.focus()}function cn(t,n,e){t.removeEventListener(n,e)}function an(t,n,e){t.addEventListener(n,e,!1)}function fn(t){t&&t.preventDefault()}function sn(t,n){var e=r(t,kn.tags);return n&&w("get.tag",[t,e]),c(e)?t:null}function ln(t){var e=r(t,kn.tags);return c(e)&&e>=0?(kn.tags.splice(e,1),n.value=kn.tags.join(jn.join),!0):!1}function gn(t,e){c(e)?(e=0>e?0:e,kn.tags.splice(e,0,t)):kn.tags.push(t),n.value=kn.tags.join(jn.join)}function vn(t,e){var r=g("span",0,{"class":"tag",tabindex:n[E]?!1:"0",title:t});if(jn.x){var i=g("a",0,{href:"",tabindex:"-1"});an(i,"click",rn),r[x](i)}an(r,"blur",tn),an(r,"click",nn),an(r,"focus",en),an(r,"keydown",un),On[D]&&(c(e)&&kn.tags[e]?On[A](r,On[y][e]):On[A](r,Tn))}function dn(t){var n,e=r(t,kn.tags);if(c(e)&&e>=0&&(n=On.children[e])){if(cn(n,"blur",tn),cn(n,"click",nn),cn(n,"focus",en),cn(n,"keydown",un),jn.x){var i=n[L];cn(i,"click",rn),s(i)}s(n)}}function pn(){Q()&&En&&En.submit()}if(n){var hn,bn,mn,kn=this,xn=t[e],yn=n.placeholder||"",Cn=n[T]("tabindex"),wn={},jn=Object.assign({},xn.state,f(l)?{join:l}:l||{});if(n[e])return kn;if(!(kn instanceof xn))return new xn(n,jn);xn[z][n.id||n.name||Object.keys(xn[z]).length]=kn,n[e]=1;var En,Ln=g("span",0,{"class":jn["class"]}),On=g("span",0,{"class":"tags"}),Tn=g("span",0,{"class":"editor tag"}),Hn=g("span",0,{contenteditable:n[E]?!1:"true",spellcheck:"false",style:"white-space:pre;"}),Mn=g("span");kn.f=function(t){return t[K]()[Y](/[^ a-z0-9-]/g,"")},on(""),u(n,jn["class"]+"-source"),n[D][A](Ln,n[B]),Ln[x](On),On[x](Tn),Tn[x](Hn),Tn[x](Mn),g(n,0,{tabindex:"-1"}),En=n.form,an(Hn,"blur",W),an(Hn,"click",$),an(Hn,"focus",q),an(Hn,"keydown",G),an(Hn,"paste",U),an(n,"focus",Z),an(Ln,"click",V),En&&an(En,"submit",Q),kn.tags=[],J(n.value),kn.hooks=wn,kn.input=Hn,kn.self=kn.view=Ln,kn.source=kn.output=n,kn.state=jn,kn.blur=function(){return!n[E]&&(Hn.blur(),W()),kn},kn.click=function(){return Ln.click(),V(),kn},kn.fire=w,kn.focus=function(){return n[E]||(Hn.focus(),q()),kn},kn.get=function(t){return n[E]?null:sn(t,1)},kn.let=function(t){if(!n[E]&&!n[S]){var e=jn.min;if(I(),e>0&&kn.tags.length<e)return w("min.tags",[e]),kn;dn(t),ln(t)}return kn},kn.on=C,kn.off=v,kn.pop=function(){return n[e]?(delete n[e],cn(Hn,"blur",W),cn(Hn,"click",$),cn(Hn,"focus",q),cn(Hn,"keydown",G),cn(Hn,"paste",U),cn(n,"focus",Z),cn(Ln,"click",V),En&&cn(En,"submit",Q),kn.tags[O](dn),i(n,jn["class"]+"-source"),g(n,0,{tabindex:Cn}),s(Ln),w("pop",[kn.tags])):kn},kn.set=function(t,e){if(!n[E]&&!n[S]){var i=jn.max,u=kn.tags;sn(t)?w("has.tag",[t,r(t,u)]):u.length<i?(vn(t,e),gn(t,e)):w("max.tags",[i])}return kn},kn.value=function(t){return!n[E]&&!n[S]&&J(t),kn}}})}(this,this.document,"TP");
